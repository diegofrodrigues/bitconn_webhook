<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Primary form for Server Actions opened from Bitconn context -->
    <record id="ir_actions_server_view_form_bitconn" model="ir.ui.view">
        <field name="name">ir.actions.server.view.form.bitconn</field>
        <field name="model">ir.actions.server</field>
        <field name="mode">primary</field>
        <field name="priority">33</field>
        <field name="inherit_id" ref="base.view_server_action_form"/>
        <field name="arch" type="xml">
            <!-- Hide header buttons -->
            <xpath expr="//header/button[@name='create_action']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
        </field>
    </record>

    <!-- Primary view for base.automation used ONLY from Bitconn Outbound tab.
         Overrides action_server_ids context so new server actions default to bitconn_webhook state. -->
    <record id="view_base_automation_form_bitconn" model="ir.ui.view">
        <field name="name">base.automation.form.bitconn</field>
        <field name="model">base.automation</field>
        <field name="mode">primary</field>
        <field name="inherit_id" ref="base_automation.view_base_automation_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='action_server_ids']" position="attributes">
                <attribute name="context">{'default_model_id': model_id, 'default_state': 'bitconn_webhook', 'default_bitconn_webhook_id': bitconn_webhook_id, 'form_view_ref': 'bitconn_webhook.ir_actions_server_view_form_bitconn'}</attribute>
            </xpath>
        </field>
    </record>



</odoo>
